generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id             String @id @default(uuid())
  name           String
  email          String @unique
  hashedPassword String

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  role      UserRole @default(USER)

  userPreference   UserPreference? @relation(fields: [userPreferenceId], references: [id]) // Specify the relation only here
  userPreferenceId String?         @unique // Optional foreign key for one-to-one relationship
}

model UserPreference {
  id            String             @id @default(uuid())
  createdAt     DateTime           @default(now())
  updatedAt     DateTime           @updatedAt
  emailVerified Boolean            @default(false)
  loginProvider UserLoginProviders @default(EMAIL)

  user User? @relation // Do not specify `fields` and `references` here
}

enum UserLoginProviders {
  EMAIL
  GOOGLE
  DISCORD
  OTHER
}

enum UserRole {
  USER
  EDITOR
  ADMIN
}
